m <- c(m, year.i)
}
return(m)
}
leap.years<-as.data.frame(leaps(1))
leap.years<-leap.years[!duplicated(leaps(1)),]
#year<-1950:2016
empty.raster<-raster1[[1]]
num.false.spring.year<-list()
#dates.false.spring<-list()
for(i in 1951:1983){#i=1952
print(i)
year.i<-i
is.leap<-ifelse(year.i%in%leap.years,TRUE,FALSE)
sequence.years<-which(year==year.i)
#length(sequence.years)
raster.sub<-subset(raster1,sequence.years)
#numnonas<-sum(!is.na(values(raster.sub[[1]])))
rast.array<-array(75,dim=c(ncell(raster.sub),181))
if(is.leap){
for(j in 75:181){ ## you need to change
print(paste(year.i,j))
rast.array[,j]<-values(raster.sub[[j]])
}
}
if(!is.leap){
for(j in 75:181){ ## you need to change
print(paste(year.i,j))
rast.array[,j]<-values(raster.sub[[j]])
}
}
#dates.fs<-apply(rast.array, 1, function(x){ifelse(x<=-2.2, x, 0)})
num.false.spring<-apply(rast.array,1,function(x){sum(ifelse(x<=-2.2,1,0))})
non.nas.ids<-which(!is.na(num.false.spring))
#values(emp.rast)<-NA
values(empty.raster)<- NA
#non.nas.dates<-which(!is.na(dates.fs))
#plot(raster1[[1]])
values(empty.raster)[non.nas.ids]<- num.false.spring[!is.na(num.false.spring)]
#values(empty.raster)[non.nas.dates]<- dates.fs[!is.na(dates.fs)]
#plot(empty.raster)
#dates.false.spring[[i]]<- empty.raster
num.false.spring.year[[i]]<-empty.raster
}
length(num.false.spring.year)
final.raster.preCC<-stack(unlist(num.false.spring.year))
summed.false.springs.preCC<-calc(final.raster.preCC,sum)
fs.years.pre<-calc(final.raster.preCC, function(x) {sum(ifelse(x>=1,1,0))})
writeRaster(fs.years.pre,"~/Documents/git/regionalrisk/analyses/output/fs.30.pre", bylayer=TRUE,format="GTiff")
install.packages("gdal")
library(gdal)
library(rgdal)
install.packages("gdalUtils")
library("gdalUtils", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
install.packages("rgeos", repos="http://R-Forge.R-project.org", type="source")
install.packages("rgeos", repos = "http://R-Forge.R-project.org", type = "source")
library(rgeos)
install.packages("rgdal", repos="http://R-Forge.R-project.org", type="source")
install.packages("rgdal", type="source")
library(rgdal)
install.packages('rgdal',repos="http://www.stats.ox.ac.uk/pub/RWin")
rgdal::writeRaster(fs.years.post,"~/Documents/git/regionalrisk/analyses/output/fs.postCC", bylayer=TRUE,format="GTiff")
install.packages("rgeos", type="source")
install.packages("rgeos", type = "source")
install.packages("rgeos", repos="http://R-Forge.R-project.org", type="source")
install.packages(c('rgdal','rgeos'),repos="http://www.stats.ox.ac.uk/pub/RWin")
library("rgeos", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:rgeos", unload=TRUE)
install.packages("rgdal")
install.packages("installr")
updateR()
install.packages("updateR")
version
if(!require(installr)) {
install.packages("installr");
require(installr)
}
library(installr)
version
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(gridExtra)
library(rstanarm)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
View(d)
d<-d[!is.na(d$dvr),]
View(d)
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
View(d)
d$risk<-ave(d$dvr, d$species, d$tx)
View(d)
df<-d%>%dplyr::select(species, tx, risk)
View(df)
df<-df[!duplicated(df),]
View(df)
d$r.sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
df<-d%>%dplyr::select(species, tx, risk, r.sd)
df<-df[!duplicated(df),]
View(df)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
dxx<-read.csv("output/diffplot.csv",header=TRUE)
View(dxx)
df<-df%>%spread(tx)
View(df)
df<-df%>%separate(tx)
df<-df%>%gather(tx)
View(dxx)
View(df)
df<-d%>%dplyr::select(species, tx, risk, r.sd)
df<-df[!duplicated(df),]
df<-df%>%tidyr::spread(tx)
df<-df%>%tidyr::spread(df$tx)
View(d)
df<-df%>%tidyr::spread(tx, risk)
View(df)
d<-spread(d, tx, dvr)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d<-spread(d, tx, dvr)
View(d)
d$a.risk<-ave(d$A, d$species)
d$b.risk<-ave(d$B, d$species)
View(d)
df<-d%>%dplyr::select(species, A, B)
View(df)
df<-df[!is.na(df$A),]
df<-df[!is.na(df$B),]
df<-d%>%dplyr::select(species, A, B)
View(df)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
View(d)
d<-spread(d, tx, dvr)
View(d)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d<-spread(d, tx, risk)
View(d)
d<-spread(d, sd, risk)
d<-spread(d, tx, sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
d<-spread(d, tx, risk)
d<-spread(d, tx_sd, sd)
View(d)
View(d)
View(d)
df<-d%>%dplyr::select(species, A, B, A_se, B_se)
View(d)
df<-df[!duplicated(df),]
View(df)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
dr<-spread(d, tx, risk)
ds<-spread(d, tx_sd, sd)
df<-inner_join(dr, ds)
View(df)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
df<-d%>%dplyr::select(species, A, B, A_se, B_se)
df<-df[!duplicated(df),]
View(d)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
df<-d%>%dplyr::select(species, A, B, A_se, B_se)
df<-df[!duplicated(df),]
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(gridExtra)
library(rstanarm)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
# Clear workspace
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(gridExtra)
library(rstanarm)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
View(d)
df<-d%>%dplyr::select(species, tx, risk, sd, tx_sd)
View(df)
df<-df[!duplicated(df),]
dr<-spread(d, tx, risk)
ds<-spread(d, tx_sd, sd)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
df<-d%>%dplyr::select(species, tx, risk, sd, tx_sd)
df<-df[!duplicated(df),]
dr<-spread(df, tx, risk)
ds<-spread(df, tx_sd, sd)
View(dr)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
df<-d%>%dplyr::select(species, tx, risk, sd, tx_sd)
df<-df[!duplicated(df),]
dr<-df%>%dplyr::select(species, tx, risk)%>%spread(tx, risk)
ds<-df%>%dplyr::select(species, tx_sd, sd)%>%spread(tx_sd, sd)
View(dr)
View(ds)
df<-inner_join(dr, ds)
View(df)
df$diff<- df$B-df$A
df$diff.sd<-sqrt((df$A_se)^2+(df$B_se)^2)
View(df)
species<- ggplot(df, aes(x=B, y=A)) + geom_point(aes(size=diff), shape=21) +
geom_linerange(aes(ymin=A-A_se, ymax=A+A_se), alpha=0.3) +
geom_errorbarh(aes(xmax = B+B_se, xmin = B-B_se, height = 0), alpha=0.3) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black")) +
geom_text(aes(label=code), vjust=2, fontface="italic") + xlab("DVR with weak treatment effects") +
ylab("DVR with strong treatment effects") +
scale_size_continuous(name=expression(Delta*" in DVR"))
plot(species)
species<- ggplot(df, aes(x=B, y=A)) + geom_point(aes(size=diff), shape=21) +
geom_linerange(aes(ymin=A-A_se, ymax=A+A_se), alpha=0.3) +
geom_errorbarh(aes(xmax = B+B_se, xmin = B-B_se, height = 0), alpha=0.3) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black")) +
geom_text(aes(label=species), vjust=2, fontface="italic") + xlab("DVR with weak treatment effects") +
ylab("DVR with strong treatment effects") +
scale_size_continuous(name=expression(Delta*" in DVR"))
plot(species)
df<-filter(df, species!="SAMRAC")
species<- ggplot(df, aes(x=B, y=A)) + geom_point(aes(size=diff), shape=21) +
geom_linerange(aes(ymin=A-A_se, ymax=A+A_se), alpha=0.3) +
geom_errorbarh(aes(xmax = B+B_se, xmin = B-B_se, height = 0), alpha=0.3) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black")) +
geom_text(aes(label=species), vjust=2, fontface="italic") + xlab("DVR with weak treatment effects") +
ylab("DVR with strong treatment effects") +
scale_size_continuous(name=expression(Delta*" in DVR"))
plot(species)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(0,25)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10))
plot(diff)
df$species<-ifelse(df$species=="BETPOP", "B. populifolia", df$species)
df$species<-ifelse(df$species=="BETPAP", "B. papyrifera", df$species)
df$code<-reorder(df$species, df$bday)
df$code<-reorder(df$species)
df$code<-reorder(df$species, df$A)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(0,25)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10))
plot(diff)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(0,25)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10)) +
ylim=c(-20, 20)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(-20,20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10))
plot(diff)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(-10,20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10))
plot(diff)
View(d)
dx<-filter(d, !species="SAMRAC")
dx<-filter(d, species!="SAMRAC")
mod<-stan_glmer(dvr~tx+species+species:tx, data=dx)
View(dx)
mod<-stan_glmer(dvr~tx+species+species:tx + (1|individ), data=dx)
mod
plot(mod, pars="beta")
traits<-read.csv("output/buds_traits.csv", header = TRUE)
View(traits)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
library(lme4)
library(arm)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/buds_traits.csv", header=TRUE)
bb<-read.csv("output/birches_buddata.csv", header=TRUE)
area<-read.csv("input/SLA_buds.csv", header=TRUE)
wt<-read.csv("input/SLA_weight.csv", header=TRUE)
## Start working on columns
dx<-dplyr::select(d, NEW, TX, Bud, Chlorophyll)
dx$bud <- ave(dx$Bud, dx$NEW, FUN = seq_along)
dx$species<-substr(dx$NEW, 1, 6)
dx<-filter(dx, species !="SAMRAC")
dx<-dx[!is.na(dx$Chlorophyll),]
dx$ID<-paste(dx$NEW, dx$bud, sep="_")
bb$chlorophyll<-NA
for(i in c(1:nrow(bb))){
for(j in c(1:nrow(dx)))
if(bb$ID[i]==dx$ID[j])
bb$chlorophyll[i]<-dx$Chlorophyll[j]
}
chl.mod<-lm(chlorophyll~frost+bud+species+frost*bud, data=bb)
display(chl.mod)
qplot(species, chlorophyll, data = bb,
geom = "boxplot", color=tx) +
xlab("Species")+ylab("Chlorophyll")
ggplot(bb, aes(x=bud, y=chlorophyll, color=as.factor(frost))) + geom_point() + geom_smooth(method="lm")
dx$frz<-ifelse(dx$TX=="A", 0, 1)
dx<-na.omit(dx)
dx$spp<-substr(dx$NEW, 0,6)
sp.mean<-aggregate(Chlorophyll~NEW + frz, dx, mean)
sp.mean$species<-substr(sp.mean$NEW, 0, 6)
qplot(spp, Chlorophyll, data = dx,
geom = "boxplot", color=TX) +
xlab("Species")+ylab("Chlorophyll measurement")
mod<-lmer(Chlorophyll~frz + (1|spp), data=dx)
summary(mod)
hist(dx$Chlorophyll[dx$frz==0])
hist(dx$Chlorophyll[dx$frz==1])
hist(bb$chlorophyll[bb$frost==0])
hist(bb$chlorophyll[bb$frost==1])
#write.csv(bb, file=("~/Documents/git/freezingexperiment/analyses/output/buds_traits.csv"), row.names=FALSE)
bb.chl<-bb[!is.na(bb$chlorophyll),]
table(bb.chl$individ)
area$ID<-paste(area$ID, area$number, sep=".")
area$dry<-NA
for(i in c(1:nrow(area))){
for(j in c(1:nrow(wt)))
if(area$ID[i]==wt$ID[j])
area$dry[i]<-wt$dry[j]
}
area$sla<-area$Area/area$dry
area$ID<-substr(area$ID, 1, 10)
area$sla <- ave(area$sla, area$ID)
area<-dplyr::select(area, ID, sla)
area<-area[!duplicated(area),]
bb<-read.csv("output/buds_traits.csv", header=TRUE)
bb$sla<-NA
for(i in c(1:nrow(bb))){
for(j in c(1:nrow(area)))
if(bb$individ[i]==area$ID[j])
bb$sla[i]<-area$sla[j]
}
bb$dvr<-as.numeric(bb$dvr)
bb$dvr<-ifelse(is.na(bb$dvr), 0, bb$dvr)
bb$dvr.avg<-ave(bb$dvr, bb$individ)
sla.mod<-lm(sla~tx+dvr.avg, data=bb)
display(sla.mod)
sla.mod2<-lm(sla~tx+dvr.avg+tx*dvr.avg, data=bb)
display(sla.mod2)
qplot(species, sla, data = bb,
geom = "boxplot", color=tx) +
xlab("Species")+ylab("SLA")
View(bb)
write.csv(bb, file=("~/Documents/git/freezingexperiment/analyses/output/buds_traits.csv"), row.names=FALSE)
traits<-read.csv("output/buds_traits.csv", header = TRUE)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(gridExtra)
library(rstanarm)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("output/budsdvr_all.csv", header=TRUE, check.names=FALSE)
d<-d[!is.na(d$dvr),]
d<-dplyr::select(d, species, individ, budburst, leafout, bud, tx, dvr)
d$risk<-ave(d$dvr, d$species, d$tx)
d$sd<-ave(d$dvr, d$species, d$tx, FUN=sd)
d$tx_sd<-paste(d$tx, "se", sep="_")
dx<-filter(d, species!="SAMRAC")
df<-d%>%dplyr::select(species, tx, risk, sd, tx_sd)
df<-df[!duplicated(df),]
dr<-df%>%dplyr::select(species, tx, risk)%>%spread(tx, risk)
ds<-df%>%dplyr::select(species, tx_sd, sd)%>%spread(tx_sd, sd)
df<-inner_join(dr, ds)
df$diff<- df$B-df$A
df$diff.sd<-sqrt((df$A_se)^2+(df$B_se)^2)
df<-filter(df, species!="SAMRAC")
df$species<-ifelse(df$species=="BETPOP", "B. populifolia", df$species)
df$species<-ifelse(df$species=="BETPAP", "B. papyrifera", df$species)
df$code<-reorder(df$species, df$A)
diff<-ggplot(df, aes(x=factor(code), y=diff)) + geom_point() +
geom_linerange(aes(ymin=diff-diff.sd, ymax=diff+diff.sd), alpha=0.3) +
ylab(expression(Delta*" in DVR between treatments")) + coord_cartesian(ylim=c(-10,20)) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"), axis.title.x=element_blank(),
axis.text.x = element_text(face = "italic", angle=45, vjust=0.5), axis.text=element_text(size=10))
plot(diff)
species<- ggplot(df, aes(x=B, y=A)) + geom_point(aes(size=diff), shape=21) +
geom_linerange(aes(ymin=A-A_se, ymax=A+A_se), alpha=0.3) +
geom_errorbarh(aes(xmax = B+B_se, xmin = B-B_se, height = 0), alpha=0.3) +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black")) +
geom_text(aes(label=species), vjust=2, fontface="italic") + xlab("DVR with weak treatment effects") +
ylab("DVR with strong treatment effects") +
scale_size_continuous(name=expression(Delta*" in DVR"))
plot(species)
mod<-stan_glmer(dvr~tx+species+species:tx + (1|individ), data=dx)
mod
plot(mod, pars="beta")
traits<-read.csv("output/buds_traits.csv", header = TRUE)
View(traits)
ch<-traits%>%dplyr::select(species, individ, tx, dvr, chlorophyll)
View(ch)
ch<-ch[!duplicated(ch),]
View(ch)
ch<-ch[!is.na(ch$chlorophyll),]
View(ch)
View(d)
View(ch)
mod2<-stan_glmer(chlorophyll~species + tx + dvr + species:tx + (1|individ))
mod2<-stan_glmer(chlorophyll~species + tx + dvr + species:tx + (1|individ), data=ch)
mod2
plot(mod2, pars="beta")
sl<-traits%>%dplyr::select(species, individ, tx, dvr, sla)
sl<-sl[!is.na(sl$sla),]
mod2<-stan_glmer(sla~species + tx + dvr + species:tx + (1|individ), data=sl)
View(sl)
sl<-sl[!duplicated(sl),]
View(sl)
sl$risk<-ave(sl$dvr, sl$individ)
sl<-sl%>%dplyr::select(species, individ, tx, sla, risk)
sl<-sl[!duplicated(sl),]
View(sl)
mod2<-stan_glmer(sla~species + tx + risk + species:tx + (1|individ), data=sl)
mod2
sl$sla<- sl$sla - mean(sl$sla)
View(sl)
sl$c.sla<-scale(sl$sla, center=TRUE, scale=TRUE)
mod2<-stan_glmer(c.sla~species + tx + risk + species:tx + (1|individ), data=sl)
pairs()
pairs(mod2)
mod2
sl$c.sla<-scale(sl$sla, center=TRUE, scale=FALSE)
mod2<-stan_glmer(c.sla~species + tx + risk + species:tx + (1|individ), data=sl)
mod2<-stan_glmer(sla~species + tx + risk + species:tx + (1|individ), data=sl)
mod2
plot(mod2, pars="beta")
