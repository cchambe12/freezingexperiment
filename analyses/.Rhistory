setwd("~/Documents/git/ospree/analyses")
d<-read.csv("output/ospree_clean_withchill.csv",as.is=TRUE)
View(d)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/freezingexperiment/analyses")
d<-read.csv("input/bbch_data.csv", header=TRUE)
View(d)
d<-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
View(d)
d<-gather(d, date, -NEW, -TX)
d<-gather(d, "date","bbch", -NEW, -TX)
View(d)
d<-na.omit(d)
d$doy<-yday(d$date)
View(d)
d<-dplyr::select(d, -date)
df<-filter(d, bbch %in% phases)
phases<-c("9","15")
df<-filter(d, bbch %in% phases)
df$bbch<- factor(df$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
View(df)
df$risk <- hf$Leaves - hf$Budburst
df$risk <- df$Leaves - df$Budburst
risk<- df%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, DOY)
risk<- df%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
View(risk)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
risk<-filter(risk, Risk > 0)
risk<- df%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
View(risk)
setwd("~/Documents/git/freezingexperiment/analyses")
d<-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
df<-dplyr::select(df, -date)
phases<-c("9","15")
df2<-filter(df, bbch %in% phases)
df2$bbch<- factor(df2$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
risk<- df2%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
View(d)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/freezingexperiment/analyses")
d<-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
df<-dplyr::select(df, -date)
phases<-c("9","15")
df2<-filter(df, bbch %in% phases)
df2$bbch<- factor(df2$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
risk<- df2%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
risk<-filter(risk, Risk > 0)
View(risk)
View(df2)
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
View(df)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
View(df)
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
View(d)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
View(d)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
View(d)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
View(df)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/springfreeze")
timeline<-read.csv("input/Budburst.DF.csv",header=TRUE)
timeline$DOY<-yday(timeline$Date)
setwd("~/Documents/git/springfreeze")
timeline<-read.csv("input/Budburst.DF.csv",header=TRUE)
View(timeline)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
# Set Working Directory
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
# Organizing data
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
View(df)
df<-dplyr::select(df, -date)
phases<-c("9","15")
df2<-filter(df, bbch %in% phases)
df2$bbch<- factor(df2$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
risk<- df2%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
View(risk)
risk$species<-substr(risk$NEW, 0,6)
View(risk)
ggplot(risk, aes(x=species, y=risk)) + geom_point(aes(color=TX))
ggplot(risk, aes(x=species, y=risk)) + geom_point(aes(fill=TX))
ggplot(risk, aes(x=species, y=risk)) + geom_point(aes(col=TX))
ggplot((risk), aes(x=Budburst, y=risk), stat="identity") + geom_point(aes(x= risk$Budburst)) +
geom_segment(aes(y = risk, yend = risk, x = Budburst, xend = Leaves, col=TX)) +
geom_point(aes(x=Leaves, col=TX)) + geom_point(aes(col=TX)) +
xlab("Budburst to Leaf Out") +
ylab("Species")
ggplot(risk, aes(x=species, y=Risk)) + geom_point(aes(col=TX))
risk$Risk2 <- risk$Leaves - risk$Budburst2
phases<-c("9","10","15")
df2<-filter(df, bbch %in% phases)
df2$bbch<- factor(df2$bbch, levels = c(9,10,15),
labels = c("Budburst","Budburst2","Leaves"))
risk<- df2%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk<-na.omit(risk)
risk$Risk <- risk$Leaves - risk$Budburst
risk$Risk2 <- risk$Leaves - risk$Budburst2
View(risk)
df2<-filter(df, bbch %in% phases)
df2$bbch<- factor(df2$bbch, levels = c(9,10,15),
labels = c("Budburst","Budburst2","Leaves"))
risk$Risk <- risk$Leaves - risk$Budburst
risk$Risk2 <- risk$Leaves - risk$Budburst2
View(risk)
phases.9<-c("9","15")
df9<-filter(df, bbch %in% phases.9)
df9$bbch<- factor(df9$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
phases.10<-c("10","15")
df10<-filter(df, bbch %in% phases.10)
df10$bbch<- factor(df2$bbch, levels = c(10,15),
labels = c("Budburst2","Leaves"))
phases.10<-c("10","15")
df10<-filter(df, bbch %in% phases.10)
df10$bbch<- factor(df10$bbch, levels = c(10,15),
labels = c("Budburst2","Leaves"))
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
df$species<-substr(df$NEW, 0,6)
df<-dplyr::select(df, -date)
phases.9<-c("9","15")
df9<-filter(df, bbch %in% phases.9)
df9$bbch<- factor(df9$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
phases.10<-c("10","15")
df10<-filter(df, bbch %in% phases.10)
df10$bbch<- factor(df10$bbch, levels = c(10,15),
labels = c("Budburst2","Leaves"))
risk10<- df10%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk10<-na.omit(risk10)
risk10$Risk <- risk10$Leaves - risk10$Budburst
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/freezingexperiment/analyses")
d <-read.csv("input/bbch_data.csv", header=TRUE, check.names=FALSE)
df<-gather(d, "date","bbch", -NEW, -TX)
df<-na.omit(df)
df$doy<-yday(df$date)
df$species<-substr(df$NEW, 0,6)
df<-dplyr::select(df, -date)
phases.9<-c("9","15")
df9<-filter(df, bbch %in% phases.9)
df9$bbch<- factor(df9$bbch, levels = c(9,15),
labels = c("Budburst","Leaves"))
phases.10<-c("10","15")
df10<-filter(df, bbch %in% phases.10)
df10$bbch<- factor(df10$bbch, levels = c(10,15),
labels = c("Budburst","Leaves"))
risk9<- df9%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk9<-na.omit(risk9)
risk9$Risk <- risk9$Leaves - risk9$Budburst
risk10<- df10%>%
group_by(NEW, bbch)%>%
arrange(NEW)%>%
filter(row_number()==1) %>%
spread(bbch, doy)
risk10<-na.omit(risk10)
risk10$Risk <- risk10$Leaves - risk10$Budburst
View(risk10)
ggplot(risk, aes(x=species, y=Risk)) + geom_point(aes(col=TX))
ggplot(risk9, aes(x=species, y=Risk)) + geom_point(aes(col=TX))
ggplot((risk9), aes(x=Budburst, y=risk9), stat="identity") + geom_point(aes(x= risk9$Budburst)) +
geom_segment(aes(y = risk9, yend = risk9, x = Budburst, xend = Leaves, col=TX)) +
geom_point(aes(x=Leaves, col=TX)) + geom_point(aes(col=TX)) +
xlab("Budburst to Leaf Out") +
ylab("Species")
ggplot((risk9), aes(x=Budburst, y=NEW), stat="identity") + geom_point(aes(x= risk9$Budburst)) +
geom_segment(aes(y = NEW, yend = NEW, x = Budburst, xend = Leaves, col=TX)) +
geom_point(aes(x=Leaves, col=TX)) + geom_point(aes(col=TX)) +
xlab("Budburst to Leaf Out") +
ylab("Species")
ggplot(risk9, aes(x=species, y=Risk)) + geom_point(aes(col=as.factor(TX))) +
geom_smooth(aes(col=as.factor(TX)),method="lm", se=FALSE)
ggplot(risk9, aes(x=species, y=Risk)) + geom_point(aes(col=as.factor(TX))) +
geom_smooth(aes(col=as.factor(TX)),method="loess", se=FALSE)
risk[, sapply(.risk, function(x) list(mean=mean(x), sd=sd(x))), by=species]
risk9[, sapply(.risk9, function(x) list(mean=mean(x), sd=sd(x))), by=species]
risk9[, sapply(.SD, function(x) list(mean=mean(x), sd=sd(x))), by=species]
risk9[, c(mean = lapply(.SD, mean), sd = lapply(.SD, sd)), by = species]
risk %>% group_by(species) %>% summarise_each(funs(mean, sd))
risk9 %>% group_by(species) %>% summarise_each(funs(mean, sd))
risk9 %>% group_by(species) %>%
summarise_each(funs(risk9$mean, risk9$sd))
risk9$mean %>% group_by(species) %>%
summarise_each(funs(mean))
risk9$mean <- risk9%>%
group_by(species) %>%
summarise_each(funs(mean))
risk<-dplyr::select(risk9, species, Risk)
risk$mean <- risk%>%
group_by(species) %>%
summarise_each(funs(mean))
risk<-dplyr::select(risk9, species, Risk, -NEW)
risk<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(risk9, species, Risk)
risk<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(species, Risk)
risk$mean <- risk%>%
group_by(species) %>%
summarise_each(funs(mean))
risk<- risk%>%
group_by(species) %>%
summarise_each(funs(mean))
View(risk)
risk.mean<- risk%>%
group_by(species) %>%
summarise_each(funs(mean))
risk<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(species, Risk)
risk.mean<- risk%>%
group_by(species) %>%
summarise_each(funs(mean))
risk.sd<-risk%>%
group_by(species) %>%
summarise_each(funs(sd))
risk.species<-full_join(risk.mean, risk.sd)
View(risk.species)
risk.sd<-risk%>%
group_by(species) %>%
summarise_each(funs(sd)) %>%
rename(mean==Risk)
risk.sd<-risk%>%
group_by(species) %>%
summarise_each(funs(sd)) %>%
rename(Risk==mean)
risk.sd<-risk%>%
group_by(species) %>%
summarise_each(funs(sd)) %>%
rename(mean=Risk)
risk.mean<- risk%>%
group_by(species) %>%
summarise_each(funs(mean))%>%
rename(mean=Risk)
risk.sd<-risk%>%
group_by(species) %>%
summarise_each(funs(sd)) %>%
rename(sd=Risk)
risk.species<-full_join(risk.mean, risk.sd)
View(risk.species)
tx<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(TX, Risk)
tx.mean<- tx%>%
group_by(species) %>%
summarise_each(funs(mean))%>%
rename(mean=Risk)
tx<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(TX, Risk)
tx.mean<- tx%>%
group_by(tx) %>%
summarise_each(funs(mean))%>%
rename(mean=Risk)
tx<-risk9%>%
ungroup(NEW, Risk)%>%
dplyr::select(TX, Risk)
tx.mean<- tx%>%
group_by(TX) %>%
summarise_each(funs(mean))%>%
rename(mean=Risk)
tx.sd<-tx%>%
group_by(TX) %>%
summarise_each(funs(sd)) %>%
rename(sd=Risk)
tx.species<-full_join(risk.mean, risk.sd)
View(tx.species)
tx.species<-full_join(tx.mean, tx.sd)
View(tx.species)
mod<-lm(Risk~species + tx, data=risk9)
mod<-lm(Risk~species + TX, data=risk9)
summary(mod)
mod1<-lmer(Risk~TX + (1|species, data=risk9))
mod1<-lmer(Risk~TX + (1|species), data=risk9))
mod1<-lmer(Risk~TX + (1|species), data=risk9)
library(lme4)
mod1<-lmer(Risk~TX + (1|species), data=risk9)
summary(mod1)
mod1<-lmer(Risk~TX + (1|species), data=risk9)
display(mod1)
library(arm)
display(mod1)
mod2<-lmer(Risk~species + (1|TX), data=risk9)
display(mod2)
mod<-lm(Risk~species + TX, data=risk9)
display(mod)
View(risk9)
